<html>
<head>
	<title> 2TorMe Tester </title>
	<meta charset="UTF-8">
	<meta name="description" content="Video player tester for 2TorMe">
	<meta name="author" content="Dakota Wolfe">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">


<body>

  <!-- creates the video player, has the video in the three formats: ogv, mp4, webm -->
  <video controls>
    <source src="test.oggtheora.ogv" type="video/ogg" />
	<source src="test.mp4" type="video/mp4" />
	<source src="test.webmhd.webm" type="video/webm" />
  </video>
  <canvas id="canvas" width="640" height="480"></canvas>
  <!-- when the button is clicked, the snap() function is called, taking the screenshot -->
  <button id="snap" onclick="snap()">Snap Photo</button>

  <!-- script creates a canvas in which the screenshot will be drawn -->
  <script>
  var video=document.querySelector('video');
  var canvas=document.querySelector('canvas');
  var context=canvas.getContext('2d');
  var w,h,ratio;

  //gets the videos attributes for the screenshot so that it draws to the canvas what the video is displaying

  video.addEventListener('loadedmetadata', function() {
    ratio = video.videoWidth/video.videoHeight;
    w = video.videoWidth-100;
    h = parseInt(w/ratio,10);
    canvas.width = w;
    canvas.height = h;
  },false);

  function snap() {
    context.fillRect(0,0,w,h);
    context.drawImage(video,0,0,w,h);
  }
  </script>

</body>
</html>